(()=>{var q=Object.defineProperty;var w=(t,e)=>()=>(t&&(e=t(t=0)),e);var B=(t,e)=>{for(var s in e)q(t,s,{get:e[s],enumerable:!0})};var c,u,v=w(()=>{c=class{constructor(e,s={}){this.target=typeof e=="string"?document.querySelector(e):e,this.target&&(this.options={backdropClass:"overlay-backdrop",bodyClass:"overlay-open",backdrop:!0,keyboard:!0,static:!1,useSelfAsBackdrop:!1,...s},this.isOpen=!1,this.backdrop=null,this.closeHandlers=[],window.openOverlays||(window.openOverlays=new Set),this.init())}init(){if(this.options.backdrop&&this.createBackdrop(),this.target.querySelectorAll("[data-dismiss]").forEach(s=>{let n=i=>{i.preventDefault(),this.hide()};s.addEventListener("click",n),this.closeHandlers.push({element:s,handler:n,type:"click"})}),this.backdrop){let s=i=>{this.options.useSelfAsBackdrop?i.target===this.target&&!this.options.static&&this.hide():i.target===this.backdrop&&!this.options.static&&this.hide()},n=this.options.useSelfAsBackdrop?this.target:this.backdrop;n.addEventListener("click",s),this.closeHandlers.push({element:n,handler:s,type:"click"})}if(this.options.keyboard){let s=n=>{n.key==="Escape"&&this.isOpen&&!this.options.static&&this.hide()};document.addEventListener("keydown",s),this.closeHandlers.push({element:document,handler:s,type:"keydown"})}}createBackdrop(){this.options.useSelfAsBackdrop?this.backdrop=this.target:(this.backdrop=document.querySelector(`.${this.options.backdropClass}`),this.backdrop||(this.backdrop=document.createElement("div"),this.backdrop.className=this.options.backdropClass,document.body.appendChild(this.backdrop)))}show(){this.isOpen||(this.isOpen=!0,this.target.classList.add("show"),this.backdrop&&!this.options.useSelfAsBackdrop&&(this.backdrop.classList.add("show"),this.backdrop.dataset.activeOverlay=this.target.id||this.target.className),document.body.classList.add(this.options.bodyClass),document.body.style.overflow="hidden",this.target.dispatchEvent(new CustomEvent("overlay:shown")),window.openOverlays.add(this.target))}hide(){if(!this.isOpen)return;this.isOpen=!1,this.target.classList.remove("show"),this.backdrop&&!this.options.useSelfAsBackdrop&&!this.hasOtherOpenOverlays()&&this.backdrop.classList.remove("show"),this.backdrop&&!this.options.useSelfAsBackdrop&&delete this.backdrop.dataset.activeOverlay;let e=()=>{this.target.removeEventListener("transitionend",e),this.hasOtherOpenOverlays()||(document.body.classList.remove(this.options.bodyClass),document.body.style.overflow=""),this.target.dispatchEvent(new CustomEvent("overlay:hidden"))};this.target.addEventListener("transitionend",e,{once:!0}),setTimeout(()=>{this.target.removeEventListener("transitionend",e),this.hasOtherOpenOverlays()||(document.body.classList.remove(this.options.bodyClass),document.body.style.overflow=""),this.target.dispatchEvent(new CustomEvent("overlay:hidden"))},350),window.openOverlays.delete(this.target)}hasOtherOpenOverlays(){return window.openOverlays.size>1||window.openOverlays.size===1&&!window.openOverlays.has(this.target)}toggle(){this.isOpen?this.hide():this.show()}destroy(){this.closeHandlers.forEach(({element:e,handler:s,type:n})=>{e.removeEventListener(n,s)}),this.closeHandlers=[],this.backdrop&&!this.options.useSelfAsBackdrop&&this.backdrop.parentNode&&(this.backdrop.dataset.activeOverlay||this.backdrop.parentNode.removeChild(this.backdrop))}},u={offcanvas(t){return new c(t,{backdropClass:"offcanvas-backdrop",bodyClass:"offcanvas-open",backdrop:!0,useSelfAsBackdrop:!1})},modal(t){return new c(t,{bodyClass:"modal-open",backdrop:!1,useSelfAsBackdrop:!0})},modalWithBackdrop(t){return new c(t,{backdropClass:"modal-backdrop",bodyClass:"modal-open",backdrop:!0,useSelfAsBackdrop:!1})},collapse(t){return new c(t,{backdrop:!1,bodyClass:"collapse-open"})}}});var H={};B(H,{Modal:()=>m,cleanupModals:()=>Y,initModals:()=>W});function W(){document.querySelectorAll('[data-toggle="modal"]').forEach(e=>{let s=e.getAttribute("data-target");if(!s)return;let n=document.querySelector(s);n&&(window.modalInstances.has(s)||window.modalInstances.set(s,new m(n)),e.addEventListener("click",i=>{i.preventDefault();let o={trigger:e,slideIndex:e.hasAttribute("data-slide-index")?parseInt(e.getAttribute("data-slide-index")):Array.from(document.querySelectorAll(`[data-target="${s}"]`)).indexOf(e)};window.modalInstances.get(s)?.open(o)}))})}function Y(){!window.modalInstances||window.modalInstances.size===0||(window.modalInstances.forEach(t=>{t.destroy()}),window.modalInstances.clear())}var m,C=w(()=>{v();m=class{constructor(e,s={}){if(this.modal=typeof e=="string"?document.querySelector(e):e,!this.modal)return;let n=s.useSelfBackdrop??this.modal.hasAttribute("data-self-backdrop")??!0;this.overlay=n?u.modalSelfBackdrop(this.modal):u.modal(this.modal),this.isOpen=!1,this.closeHandlers=[],this.initModalSpecific(),this.initCloseHandlers()}initModalSpecific(){let e=this.modal.getAttribute("data-backdrop"),s=e==="static";e==="false"?this.overlay.options.static=!0:this.overlay.options.static=s,this.modal.addEventListener("overlay:hidden",()=>{this.isOpen=!1,this.modal.dispatchEvent(new CustomEvent("modal:hidden"))})}initCloseHandlers(){if(this.modal.querySelectorAll('[data-dismiss="modal"]').forEach(n=>{let i=o=>{o.preventDefault(),this.close()};n.addEventListener("click",i),this.closeHandlers.push({element:n,handler:i,type:"click"})}),this.overlay.options.useSelfAsBackdrop){let n=i=>{i.target===this.modal&&!this.overlay.options.static&&this.close()};this.modal.addEventListener("click",n),this.closeHandlers.push({element:this.modal,handler:n,type:"click"})}let s=n=>{n.key==="Escape"&&this.isOpen&&!this.overlay.options.static&&this.close()};document.addEventListener("keydown",s),this.closeHandlers.push({element:document,handler:s,type:"keydown"})}open(e=null){this.isOpen||(this.overlay.show(),this.isOpen=!0,this.modal.dispatchEvent(new CustomEvent("modal:shown",{detail:e})))}close(){this.isOpen&&(this.overlay.hide(),this.isOpen=!1,this.modal.dispatchEvent(new CustomEvent("modal:hidden")))}destroy(){this.closeHandlers.forEach(({element:e,handler:s,type:n})=>{e.removeEventListener(n,s)}),this.closeHandlers=[],this.overlay.destroy()}show(){this.open()}hide(){this.close()}toggle(){this.overlay.toggle(),this.isOpen=!this.isOpen}}});var h=class t{constructor(e){this.element=e,this.isClosing=!1,this.ensureCloseButton(),this.element.classList.contains("fade")&&!this.element.classList.contains("show")&&this.show(),this.init()}init(){let e=this.element.querySelector('[data-dismiss="alert"]');e&&e.addEventListener("click",s=>{s.preventDefault(),this.close()}),this.handleEscape=s=>{s.key==="Escape"&&this.close()},window.addEventListener("keydown",this.handleEscape)}ensureCloseButton(){if(!this.element.querySelector('[data-dismiss="alert"]')){let e=document.createElement("button");e.type="button",e.className="btn-close",e.setAttribute("data-dismiss","alert"),e.setAttribute("aria-label","Close"),e.innerHTML=`
                <svg class="close-icon icon">
                    <use xlink:href="#close-icon"></use>
                </svg>
            `,this.element.insertBefore(e,this.element.firstChild)}}show(){setTimeout(()=>{this.element.classList.add("show")},10)}close(){if(this.isClosing)return;this.isClosing=!0;let e=new CustomEvent("alert:close",{bubbles:!0});this.element.dispatchEvent(e),this.element.classList.remove("show"),setTimeout(()=>{let s=new CustomEvent("alert:closed",{bubbles:!0});this.element.dispatchEvent(s),this.element.remove(),window.removeEventListener("keydown",this.handleEscape)},300)}static getInstance(e){return e?._alertInstance||null}static create(e){if(!e)return null;let s=t.getInstance(e);return s||(s=new t(e),e._alertInstance=s),s}};function r(t,e={}){let s={type:"info",duration:3e3,position:"top-right",...e},n=document.createElement("div");n.className=`alert alert-${s.type} fade ${s.position} box-shadow`,n.setAttribute("role","alert"),n.innerHTML=`
        <button type="button" class="btn-close bn-md" data-dismiss="alert" aria-label="\u0417\u0430\u043A\u0440\u044B\u0442\u044C">
            <svg class="close-icon icon">
                <use xlink:href="#close-icon"></use>
            </svg>
        </button>
        <div class="alert-body">${t}</div>
    `,document.body.appendChild(n);let i=h.create(n);return s.duration>0&&setTimeout(()=>{i.close()},s.duration),i}var g={success:(t,e=5e3,s="top-center")=>r(t,{type:"success",duration:e,position:s}),warning:(t,e=5e3,s="top-center")=>r(t,{type:"warning",duration:e,position:s}),error:(t,e=0,s="top-center")=>r(t,{type:"error",duration:e,position:s}),info:(t,e=5e3,s="top-center")=>r(t,{type:"info",duration:e,position:s}),danger:(t,e=0,s="top-center")=>r(t,{type:"danger",duration:e,position:s}),primary:(t,e=5e3,s="top-center")=>r(t,{type:"primary",duration:e,position:s}),light:(t,e=3e3,s="bottom-center")=>r(t,{type:"light",duration:e,position:s})};v();var d=class{constructor(e){this.offcanvas=typeof e=="string"?document.querySelector(e):e,this.offcanvas&&(this.overlay=u.offcanvas(this.offcanvas),this.isOpen=!1,this.closeHandlers=[],this.init())}init(){this.offcanvas.querySelectorAll('[data-dismiss="offcanvas"]').forEach(n=>{let i=o=>{o.preventDefault(),this.hide()};n.addEventListener("click",i),this.closeHandlers.push({element:n,handler:i,type:"click"})});let s=n=>{n.key==="Escape"&&this.isOpen&&this.hide()};document.addEventListener("keydown",s),this.closeHandlers.push({element:document,handler:s,type:"keydown"})}show(){this.overlay.show(),this.isOpen=!0}hide(){this.overlay.hide(),this.isOpen=!1}toggle(){this.overlay.toggle(),this.isOpen=!this.isOpen}destroy(){this.closeHandlers.forEach(({element:e,handler:s,type:n})=>{e.removeEventListener(n,s)}),this.closeHandlers=[],this.overlay.destroy()}};var p=class{constructor(e){this.element=e,this.isAnimating=!1,this.isShown=e.classList.contains("show")}toggle(){this.isShown?this.hide():this.show()}show(){if(this.isAnimating||this.isShown)return;this.isAnimating=!0,this.element.style.height="0",this.element.classList.remove("collapse"),this.element.classList.add("collapsing");let e=this.element.scrollHeight;requestAnimationFrame(()=>{this.element.style.height=e+"px"});let s=()=>{this.element.removeEventListener("transitionend",s),this.element.classList.remove("collapsing"),this.element.classList.add("collapse","show"),this.element.style.height="",this.isAnimating=!1,this.isShown=!0};this.element.addEventListener("transitionend",s)}hide(){if(this.isAnimating||!this.isShown)return;this.isAnimating=!0,this.element.style.height=this.element.scrollHeight+"px",requestAnimationFrame(()=>{this.element.classList.remove("collapse","show"),this.element.classList.add("collapsing"),requestAnimationFrame(()=>{this.element.style.height="0"})});let e=()=>{this.element.removeEventListener("transitionend",e),this.element.classList.remove("collapsing"),this.element.classList.add("collapse"),this.element.style.height="",this.isAnimating=!1,this.isShown=!1};this.element.addEventListener("transitionend",e)}};function y(t,e=0){window.scrollTo({top:t-e,behavior:"smooth"})}function b(t){let e=!1;return function(...s){e||(requestAnimationFrame(()=>{t.apply(this,s),e=!1}),e=!0)}}function k(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function E(){let t=document.querySelector(".scroll-down"),e=document.querySelector("#back2top"),s=document.querySelector("#searchContainer"),n=b(()=>{let o=window.scrollY,l=window.innerHeight;if(t&&o>=l&&(t.remove(),t=null),e){let a=o>l;e.classList.toggle("disable",!a),e.style.transform=a?"translateY(0)":"translateY(4vh)"}s?.classList.contains("active")&&s.classList.remove("active")});document.addEventListener("scroll",n,{passive:!0}),document.querySelectorAll(".loading").forEach(o=>{o.classList.remove("loading"),o.classList.add("loaded")}),e?.addEventListener("click",o=>{o.preventDefault(),y(0,0)}),t?.addEventListener("click",o=>{o.preventDefault(),y(0,-window.innerHeight)}),I(),z(),T(),M(),D()}function I(){document.querySelectorAll('[data-toggle="offcanvas"]').forEach(e=>{let s=e.getAttribute("data-target");if(!s)return;let n=document.querySelector(s);n&&e.addEventListener("click",i=>{i.preventDefault(),new d(n).toggle()})})}function T(){document.querySelectorAll(".alert").forEach(e=>{h.create(e)})}function z(){let t=document.querySelector("#searchContainer");if(!t)return;let e=t.querySelector("[type=search]"),s=t.querySelector(".clear-input");document.querySelectorAll(".nav-search-link").forEach(i=>{i.addEventListener("click",o=>{o.preventDefault(),t.classList.toggle("active"),t.classList.contains("active")?(e.value&&s?.classList.add("show"),e.focus()):e.blur()})}),s?.addEventListener("click",()=>{e.value="",e.focus(),s.classList.remove("show")}),e?.addEventListener("input",i=>{i.target.value.length>0?s?.classList.add("show"):s?.classList.remove("show")}),document.addEventListener("keydown",i=>{i.key==="Escape"&&t.classList.contains("active")&&t.classList.remove("active")})}function M(){document.querySelectorAll('[data-toggle="collapse"]').forEach(e=>{if(e.dataset.collapseInitialized)return;e.dataset.collapseInitialized="true";let s=e.getAttribute("href")||e.getAttribute("data-target");if(!s)return;let n=document.querySelector(s);n&&e.addEventListener("click",i=>{window.innerWidth>=992||!k()||(i.preventDefault(),i.stopPropagation(),new p(n).toggle(),requestAnimationFrame(()=>{let o=n.classList.contains("show");e.setAttribute("aria-expanded",o.toString())}))})})}function D(){document.querySelectorAll(".collapsed").forEach(e=>{e.addEventListener("click",s=>{s.currentTarget.classList.contains("collapsed")?(s.currentTarget.classList.remove("collapsed"),s.currentTarget.classList.add("expanded")):s.currentTarget.classList.contains("expanded")&&(s.currentTarget.classList.remove("expanded"),s.currentTarget.classList.add("collapsed"))},{passive:!0})})}var f=class{constructor(e){this.navbar=e,this.navbar&&(this.menu=document.querySelector("#navbarMenu"),this.menuOffcanvas=this.menu?new d(this.menu):null,this.init())}init(){L(this.navbar),this.initNavLinks(),P(),this.initResizeHandler()}initNavLinks(){document.querySelectorAll("a.nav-link:not(.dropdown-toggle)").forEach(s=>{s.addEventListener("click",()=>{window.innerWidth<992&&this.menuOffcanvas&&this.menuOffcanvas.hide()})})}initResizeHandler(){window.addEventListener("resize",()=>{window.innerWidth>=992&&(!(document.documentElement.classList.contains("designer-page")||document.body.classList.contains("designer-page"))&&this.menuOffcanvas&&this.menu.classList.contains("show")&&this.menuOffcanvas.hide(),L(this.navbar))})}};function P(){let t=document.getElementById("exhibitionsMenuLink"),e=document.getElementById("dropdownYearsList");!t||!e||t.addEventListener("click",s=>{if(window.innerWidth<992){s.preventDefault();let n=(t.getAttribute("aria-expanded")!=="true").toString();t.setAttribute("aria-expanded",n),n?(e.classList.add("show"),e.classList.remove("collapse")):(e.classList.remove("show"),e.classList.add("collapse"))}})}function L(t){if(!t)return;let e=t.clientHeight,s=t.nextElementSibling;if(s){s.style.marginTop=e+"px";let n=s.clientHeight,i=s.nextElementSibling;i&&(i.style.minHeight=`calc(100vh - ${e}px - ${n}px)`)}}function R(t){return t.complete&&t.naturalHeight!==0?(t.classList.add("lazyloaded"),t.classList.remove("lazyload"),t.dataset.src&&t.removeAttribute("data-src"),t.dataset.srcset&&t.removeAttribute("data-srcset"),Promise.resolve()):new Promise((e,s)=>{t.onload=function(){t.classList.add("lazyloaded"),t.classList.remove("lazyload"),t.dataset.src&&t.removeAttribute("data-src"),t.dataset.srcset&&t.removeAttribute("data-srcset"),e()},t.onerror=function(){t.classList.add("lazyerror"),t.classList.remove("lazyload"),console.warn("Failed to load image:",t.src||t.dataset.src),s(new Error("Image load failed"))}})}function A(t){return t.dataset.src&&(!t.src||t.src!==t.dataset.src)&&(t.src=t.dataset.src),t.dataset.srcset&&(!t.srcset||t.srcset!==t.dataset.srcset)&&(t.srcset=t.dataset.srcset),"loading"in HTMLImageElement.prototype&&!t.hasAttribute("loading")&&t.setAttribute("loading","lazy"),R(t)}function S(){let t=document.querySelectorAll("img.lazyload:not(.lazyloaded)");if(t.length!==0)if(t.forEach(e=>{e.src&&!e.dataset.src&&e.complete&&e.naturalHeight!==0&&(e.classList.add("lazyloaded"),e.classList.remove("lazyload"))}),"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){let e=new IntersectionObserver(s=>{s.forEach(n=>{if(n.intersectionRatio>0){let i=n.target;A(i).catch(()=>{}),e.unobserve(i)}})},{rootMargin:"50px 0px",threshold:.01});t.forEach(s=>{e.observe(s)})}else t.forEach(e=>{A(e).catch(()=>{})})}function x(t,e="",s="post",n=O,i=null){let o=s.toLowerCase()==="get"?`${t}?${e}`:t,l={method:s,headers:{"X-Requested-With":"XMLHttpRequest"}};s.toLowerCase()==="post"&&(l.headers["Content-Type"]="application/x-www-form-urlencoded",l.body=e),fetch(o,l).then(a=>{if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return a.json()}).then(a=>{typeof n=="function"?(console.log("\u{1F4DE} Calling render function"),n(a)):(console.warn("\u274C Render function not provided"),O(a))}).catch(a=>{console.error("AJAX Error:",a),$(a,i)})}function $(t,e=null){let s=F(t);if(e){let n=e.querySelector(".message-status");n&&(n.classList.add("error"),n.textContent=s)}else N(s)}function F(t){return t.name==="TypeError"&&t.message.includes("Failed to fetch")?"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0442\u0438: \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443":t.message.includes("HTTP error! status: 403")?"\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u0434\u043B\u044F \u044D\u0442\u043E\u0433\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F":t.message.includes("HTTP error! status: 404")?"\u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430":t.message.includes("HTTP error")?`\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ${t.status}`:t.message.includes("\u0414\u043E\u0441\u0442\u0443\u043F \u0437\u0430\u043F\u0440\u0435\u0449\u0435\u043D")?"\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u0434\u043B\u044F \u044D\u0442\u043E\u0433\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F":t.message||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"}function N(t){window.Alert?window.Alert.error(`<h3>\u041E\u0448\u0438\u0431\u043A\u0430!</h3><p>${t}</p>`):(console.error("AJAX Error:",t),alert(`\u041E\u0448\u0438\u0431\u043A\u0430: ${t}`))}function O(t){if(console.log("AJAX Response (no render function provided):",t),t.message&&window.Alert){let e=t.status==="error"?"error":"success";window.Alert[e]?.(t.message)}}document.addEventListener("DOMContentLoaded",async()=>{E();let t=document.querySelector(".navbar");if(t&&new f(t),document.querySelector(".modal")){window.modalInstances=new Map;let{initModals:e,cleanupModals:s}=await Promise.resolve().then(()=>(C(),H));e(),window.addEventListener("beforeunload",s)}window.ajaxSend=x,window.Alert=g,S(),"loading"in HTMLImageElement.prototype&&document.querySelectorAll("img:not(.lazyload)").forEach(s=>{s.dataset.src&&(s.src=s.dataset.src,s.removeAttribute("data-src")),s.dataset.srcset&&(s.srcset=s.dataset.srcset,s.removeAttribute("data-srcset")),s.complete&&s.naturalHeight!==0&&s.classList.add("lazyloaded")})});})();
