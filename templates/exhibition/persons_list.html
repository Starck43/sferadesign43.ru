{% extends 'base.html' %}
{% load static %}
{% load custom_tags %}
{% load cache %}
{% load thumbnail %}

{% block title %}{{ block.super }} {{separator}} {{page_title}} {% if exh_year != 'all' %}{{ exh_year }}{% else %}за все годы{% endif %}{% endblock %}

{% block site_header %}
	<svg class="brand-text"><use xlink:href="#main-title"></use></svg>
{% endblock site_header %}

{% block page_title %}
	{{ page_title }} {% if exh_year != 'all' %}{{ exh_year }}{% else %}за все годы{% endif %}
{% endblock page_title %}

{% block link %}
	<a href="#" class="sidebar-show-link d-lg-none"><svg class="icon bi bi-filter-right left"><use xlink:href="#filter-icon"></use></svg>выбрать год</a>
{% endblock link %}

{% block sidebar %}{% include "sidebar.html" %}{% endblock sidebar %}


{% block content %}

	{% block person %}

	{% cache 2592000 persons absolute_url exh_year %}

	<div class="grid-container row">
		{% for person in object_list %}
		<a class="grid-cell col-6 col-sm-4 col-md-3 col-lg-4 col-xl-3" href="{{ person.get_absolute_url }}">

			<div class="person-logo ratio ratio-1x1">
				{% thumbnail person.logo "150x150" as logo_1x %}
				{% thumbnail person.logo "300x300" as logo_2x %}
				<img class="lazyload"
					data-src="{{ logo_1x.url }}"
					data-srcset="{{ logo_1x.url }} {{ logo_1x.x }}w, {{ logo_2x.url }} {{ logo_2x.x }}w"
					data-sizes="auto"
					loading="lazy"
					title="{{ person.name }}"
					alt="{{ person.name }}">
				{% empty %}
				<img src="{% get_media_prefix %}no-person.png">
				{% endthumbnail %}
				{% endthumbnail %}
			</div>
			<h4 class="person-title">{{ person }}</h4>
		</a>
		{% empty %}
			<h3>пока не определены!</h3>
		{% endfor %}
	</div>

	{% endcache %}

	{% endblock person %}

{% endblock content %}
