{% extends 'base.html' %}
{% load static %}
{% load custom_tags %}
{% load cache %}
{% load thumbnail %}


{% block site_title %}
{{ block.super }}
<svg class="site-title"><use xlink:href="#main-title"></use></svg>
{% endblock site_title %}


{% block header %}
	<h1>{{ page_title }}
		{% if exhibition %}
			{{ exhibition }}
		{% else %}
			за все годы
		{% endif %}
	</h1>
{% endblock%}

{% block content %}
	{% block sidebar %}{% endblock sidebar %}

	<div class="content">

		{% cache 86400 persons absolute_url %}
		{% if object_list %}

			{% block person %}

			<div class="persons-container row">
				{% for e in object_list %}
				<a class="person-wrapper col-6 col-xxl-2 col-md-3 col-sm-4" href="{{ e.get_absolute_url }}">

					<div class="person-logo ratio ratio-1x1">
						{% thumbnail e.logo "150x150" as logo_1x %}
						{% thumbnail e.logo "300x300" as logo_2x %}
						<img class="lazyload"
							data-src="{{ e.logo }}"
							data-srcset="{{ logo_1x.url }} {{ logo_1x.x }}w, {{ logo_2x.url }} {{ logo_2x.x }}w"
							data-sizes="auto"
							loading="lazy"
							title="{{ e.name }}"
							alt="{{ e.name }}">
						{% empty %}
						<img src="{% get_media_prefix %}no-person.png">
						{% endthumbnail %}
						{% endthumbnail %}
					</div>
					<h3 class="person-title">{{ e }}</h3>

				</a>
				{% endfor %}
			</div>

			{% endblock person %}

		{% else %}
			<h4>Список пустой</h4>
		{% endif %}
		{% endcache %}

	</div>
{% endblock %}
