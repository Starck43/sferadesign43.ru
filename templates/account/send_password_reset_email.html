{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block header %}<h1>Сброс паролей пользователей</h1>{% endblock %}

{% block styles %}
<style>
	#div_id_users >label{width: 100%;background:#eee;padding:10px;margin: 1em 0 0.5em;}
	#div_id_users >div{border: 1px solid #eee;padding:10px;}
	@media (min-width: 992px) {
		#div_id_users >div{column-count:2;}
	}
</style>
{% endblock styles %}

{% block script %}
<script type="text/javascript" >
function checkSelect(source,name) {
    checkboxes = document.getElementsByName(name);
    for (var i = 0,
        n = checkboxes.length; i < n; i++) {
        checkboxes[i].checked = (source) ? source.checked : !checkboxes[i].checked;
    }
}
checkSelect(null,'users');
</script>
{% endblock script %}


{% block content %}

{% if user.is_authenticated and user.is_staff %}
<p>Выберите из списка пользователей, для отправки писем со ссылкой на запрос смены пароля.</p>

<form class="reset-password-form" method="POST">
	{% csrf_token %}

	{% for checkbox in form %}
	<div class="form-check">
		{% for check in checkbox|slice:":1" %}
		<input id="id_all_users" class="form-check-input" type="checkbox" onClick="checkSelect(this,'{{ checkbox.name }}')">
		<label class="form-check-label" for "id_all_users"><b>Выбрать всех</b></label>
		<div>
		<input id="id_toggle_users" class="form-check-input" type="checkbox" onClick="checkSelect(null,'{{ checkbox.name }}')">
		<label class="form-check-label" for "id_toggle_users"><b>Инвертировать отмеченные адреса</b></label>
		</div>
		{% endfor %}
	</div>
	{{ checkbox|as_crispy_field }}
	{% endfor %}

	<button class="btn btn-outline-dark" type="submit">Отправить</button>

</form>
{% endif %}

{% endblock %}
